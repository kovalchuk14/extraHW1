{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/constants.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["// Функції для роботи з бекендом\nimport axios from \"axios\";\n\nconst endPoints = [\n    \"https://dummyjson.com/docs/products\",\n    \"https://dummyjson.com/products?limit=12&skip=\",\n    \"https://dummyjson.com/products/\",\n    \"https://dummyjson.com/products/search?q=\",\n    \"https://dummyjson.com/products/category-list\",\n    \"https://dummyjson.com/products/category/\"\n]\n\nexport async function getCategories() {\n    const response = await axios.get(endPoints[4]);\n    return response.data;\n}\n\nexport async function getProducts(page) {\n    const response = await axios.get(endPoints[1] + `${(page - 1) * 12}`);\n    return response.data.products;\n}\n\nexport async function getProductsByCategories(page, category) {\n    const response = await axios.get(endPoints[5] + category);\n    return (response.data.products.slice(((page - 1) * 12), page * 12));\n}\n\nexport async function getProductById(id) {\n    const response = await axios.get(endPoints[2] + id);\n    return response.data;\n}\n\nexport async function getProductByName(page, name) {\n    const response = await axios.get(endPoints[3] + name);\n    return (response.data.products.slice(((page - 1) * 12), page * 12));\n}","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    ul_categories: document.querySelector(\".categories\"),\n    ul_products: document.querySelector(\".products\"),\n    load_button: document.querySelector(\"#load-more\"),\n    loader: document.querySelector(\".not-found\"),\n    modal: document.querySelector(\".modal\"),\n    modal_product: document.querySelector(\".modal-product\"),\n    modal_close: document.querySelector(\".modal__close-btn\"),\n    form: document.querySelector(\".search-form\"),\n    form_input: document.querySelector(\".search-form__input\"),\n};\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from \"./refs\";\n\nexport function addCategories(list) {\n    const content = list.map((category) => {\n        return `\n            <li class=\"categories__item\">\n                <button class=\"categories__btn\" type=\"button\">${category}</button>\n             </li>\n        `;\n    }).join(\"\");\n    refs.ul_categories.insertAdjacentHTML(\"beforeend\", content);\n}\n\nexport function addProducts(list) {\n    const content = list.map((product) => {\n        return `\n            <li class=\"products__item\" data-id=\"${product.id}\">\n                <img class=\"products__image\" src=\"${product.images[0]}\" alt=\"${product.description}\"/>\n                <p class=\"products__title\">${product.title}</p>\n                <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: </span>${product.brand}</p>\n                <p class=\"products__category\">Category: ${product.category}</p>\n                <p class=\"products__price\">Price: ${product.price}$</p>\n            </li>\n        `;\n    }).join(\"\");\n    refs.ul_products.insertAdjacentHTML(\"beforeend\", content);\n}\n\nexport function clearList() {\n    refs.ul_products.innerHTML = \"\";\n}\n\nexport function addModal(data) {\n    refs.modal.classList.add(\"modal--is-open\");\n    refs.modal_product.innerHTML = \"\";\n    refs.modal_product.insertAdjacentHTML(\"beforeend\",\n        `\n            <img class=\"modal-product__img\" src=\"${data.images[0]}\" alt=\"${data.description}\" />\n            <div class=\"modal-product__content\">\n                <p class=\"modal-product__title\">${data.title}</p>\n                <ul class=\"modal-product__tags\">${data.tags}</ul>\n                <p class=\"modal-product__description\">${data.description}</p>\n                <p class=\"modal-product__shipping-information\">Shipping: ${data.shipingInformation}</p>\n                <p class=\"modal-product__return-policy\">Return Policy: ${data.returnPolicy}</p>\n                <p class=\"modal-product__price\">Price: ${data.price}$</p>\n                <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n            </div>\n        `\n    )\n}\n\nexport function removeModal() {\n    refs.modal.classList.remove(\"modal--is-open\");\n}","//Константи\n\nexport const STORAGE_KEYS = {\n    currentPage: 1,\n    choosenCategory: \"\",\n    choosenName: \"\",\n};\n","// Функції, які передаються колбеками в addEventListners\nimport { getProducts, getProductsByCategories, getProductById, getProductByName } from \"./products-api\";\nimport { addProducts, clearList, addModal, removeModal } from \"./render-function\";\nimport { STORAGE_KEYS } from \"./constants\";\nimport { refs } from \"./refs\";\n\nexport async function loadMore() {\n    let list = await getProducts(STORAGE_KEYS.currentPage);\n    if (isEmpty(list) == true) return;\n    addProducts(list);\n    STORAGE_KEYS.currentPage++;\n}\n\n\nexport async function categoryChoosen(event) {\n    if (event.target.nodeName != \"BUTTON\") return;\n    clearList();\n    STORAGE_KEYS.currentPage = 1;\n    const firstButton = refs.ul_categories.querySelector(\"button\");\n    if (event.target == firstButton) {\n        categoryUnchoosen();\n        return;\n    }\n    refs.load_button.removeEventListener(\"click\", loadMore);\n    refs.load_button.removeEventListener(\"click\", loadMoreByName);\n    refs.load_button.addEventListener(\"click\", loadMoreByCategory);\n    STORAGE_KEYS.choosenCategory = event.target.textContent;\n    loadMoreByCategory();\n}\n\nexport async function loadMoreByCategory() {\n    let list = await getProductsByCategories(STORAGE_KEYS.currentPage, STORAGE_KEYS.choosenCategory);\n    if (isEmpty(list) == true) return;\n    addProducts(list);\n    STORAGE_KEYS.currentPage++;\n}\n\nexport function categoryUnchoosen() {\n    refs.load_button.removeEventListener(\"click\", loadMoreByCategory);\n    refs.load_button.removeEventListener(\"click\", loadMoreByName);\n    refs.load_button.addEventListener(\"click\", loadMore);\n    loadMore();\n}\n\nexport function isEmpty(list) {\n    if (list.length == 0) {\n        refs.loader.classList.add(\"not-found--visible\");\n        return true;\n    }\n    return false;\n}\n\nexport async function cardOpened(event) {\n    const li = event.target.closest(\"li\");\n    if (!li) return;\n\n    const data = await getProductById(li.dataset.id);\n    addModal(data);\n}\n\nexport function cardClosed() {\n    removeModal();\n}\n\nexport async function searchProduct(event) {\n    event.preventDefault();\n\n\n    STORAGE_KEYS.choosenName = refs.form_input.value.trim();\n    if (STORAGE_KEYS.choosenName == \"\") return;\n    STORAGE_KEYS.currentPage = 1;\n    const list = await getProductByName(STORAGE_KEYS.currentPage, STORAGE_KEYS.choosenName);\n    clearList();\n    if (isEmpty(list) == true) return;\n    addProducts(list);\n    STORAGE_KEYS.currentPage++;\n\n    refs.load_button.removeEventListener(\"click\", loadMoreByCategory);\n    refs.load_button.removeEventListener(\"click\", loadMore);\n    refs.load_button.addEventListener(\"click\", loadMoreByName);\n\n}\n\n\nexport async function loadMoreByName() {\n\n    let list = await getProductByName(STORAGE_KEYS.currentPage, STORAGE_KEYS.choosenName);\n    if (isEmpty(list) == true) return;\n    addProducts(list);\n    STORAGE_KEYS.currentPage++;\n}\n","//Логіка сторінки Home\nimport { getCategories, getProducts } from \"./js/products-api\";\nimport { addCategories, addProducts } from \"./js/render-function\";\nimport { categoryChoosen, loadMore, categoryUnchoosen, cardOpened, cardClosed, searchProduct } from \"./js/handlers\";\nimport { refs } from \"./js/refs\";\nimport { STORAGE_KEYS } from \"./js/constants\";\n\n\nasync function init() {\n    let categories = await getCategories();\n    categories.unshift(\"All\");\n    addCategories(categories);\n\n}\ninit();\nrefs.ul_categories.addEventListener(\"click\", categoryChoosen);\n\nloadMore();\nrefs.load_button.addEventListener(\"click\", loadMore);\n\nrefs.ul_products.addEventListener(\"click\", cardOpened);\nrefs.modal_close.addEventListener(\"click\", cardClosed)\nrefs.form.addEventListener(\"submit\", searchProduct);\n"],"names":["endPoints","getCategories","axios","getProducts","page","getProductsByCategories","category","getProductById","id","getProductByName","name","refs","addCategories","list","content","addProducts","product","clearList","addModal","data","removeModal","STORAGE_KEYS","loadMore","isEmpty","categoryChoosen","event","firstButton","categoryUnchoosen","loadMoreByName","loadMoreByCategory","cardOpened","li","cardClosed","searchProduct","init","categories"],"mappings":"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"}