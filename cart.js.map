{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { STORAGE_KEYS } from \"./js/constants\";\nimport { wishlistCounterUpdate, cartCounterUpdate, addProducts } from \"./js/render-function\";\nimport { getProductById } from \"./js/products-api\";\nimport { refs } from \"./js/refs\";\nimport { cardOpened, cardClosed, addToCart, addToWishlist } from \"./js/modal\";\n\nSTORAGE_KEYS.wishlist = JSON.parse(localStorage.getItem(\"wishlist\")) || [];\nSTORAGE_KEYS.cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\nwishlistCounterUpdate();\ncartCounterUpdate();\n\nfunction updateOrder(list) {\n    let price = list.reduce((sum, product) => sum += product.price, 0);\n    refs.cart_sum.textContent = price;\n    refs.cart_amount.textContent = STORAGE_KEYS.cart.length;\n}\n\nasync function loadCart() {\n    if (STORAGE_KEYS.cart.length == 0) return;\n    const requests = STORAGE_KEYS.cart.map(id =>\n        getProductById(id)\n    );\n    const list = await Promise.all(requests);\n    addProducts(list);\n\n    updateOrder(list);\n}\nloadCart();\n\nfunction buyCart() {\n    iziToast.success({\n        title: 'Niiiice!!!',\n        message: 'to be continued'\n    });\n}\n\nrefs.ul_products.addEventListener(\"click\", cardOpened);\nrefs.modal_close.addEventListener(\"click\", cardClosed);\nrefs.button_add_to_cart.addEventListener(\"click\", addToCart);\nrefs.button_add_to_wishlist.addEventListener(\"click\", addToWishlist);\nrefs.buy_all.addEventListener(\"click\", buyCart);"],"names":["STORAGE_KEYS","wishlistCounterUpdate","cartCounterUpdate","updateOrder","list","price","sum","product","refs","loadCart","requests","id","getProductById","addProducts","buyCart","iziToast","cardOpened","cardClosed","addToCart","addToWishlist"],"mappings":"8JASAA,EAAa,SAAW,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,GACxEA,EAAa,KAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,GAAK,GAChEC,IACAC,IAEA,SAASC,EAAYC,EAAM,CACvB,IAAIC,EAAQD,EAAK,OAAO,CAACE,EAAKC,IAAYD,GAAOC,EAAQ,MAAO,CAAC,EACjEC,EAAK,SAAS,YAAcH,EAC5BG,EAAK,YAAY,YAAcR,EAAa,KAAK,MACrD,CAEA,eAAeS,GAAW,CACtB,GAAIT,EAAa,KAAK,QAAU,EAAG,OACnC,MAAMU,EAAWV,EAAa,KAAK,IAAIW,GACnCC,EAAeD,CAAE,CACzB,EACUP,EAAO,MAAM,QAAQ,IAAIM,CAAQ,EACvCG,EAAYT,CAAI,EAEhBD,EAAYC,CAAI,CACpB,CACAK,IAEA,SAASK,GAAU,CACfC,EAAS,QAAQ,CACb,MAAO,aACP,QAAS,iBACjB,CAAK,CACL,CAEAP,EAAK,YAAY,iBAAiB,QAASQ,CAAU,EACrDR,EAAK,YAAY,iBAAiB,QAASS,CAAU,EACrDT,EAAK,mBAAmB,iBAAiB,QAASU,CAAS,EAC3DV,EAAK,uBAAuB,iBAAiB,QAASW,CAAa,EACnEX,EAAK,QAAQ,iBAAiB,QAASM,CAAO"}